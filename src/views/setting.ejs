<%- include("partials/header.ejs") %>

<div
  id="confirmBox"
  class="fixed inset-0 flex items-center justify-center z-50 bg-opacity-25 bg-gray-400 hidden"
>
  <div
    class="max-w-md mx-auto bg-white border border-gray-300 text-center rounded-lg shadow-lg p-8"
  >
    <p id="confirm-text" class="text-lg text-gray-800 mb-4"></p>
    <div class="flex justify-center">
      <button
        id="yes"
        class="px-4 py-2 bg-purple-300 text-white rounded-md hover:bg-purple-400 focus:outline-none"
      >
        Yes
      </button>
      <button
        onclick="hideConfirmBox()"
        class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-800 focus:outline-none ml-4"
      >
        No
      </button>
    </div>
  </div>
</div>

<div
  class="bg-gray-900 mx-auto flex min-h-screen w-full flex-col gap-4 px-[18px] py-10"
>
  <h2 class="text-3xl font-medium text-slate-100">Settings</h2>
  <div class="flex flex-col gap-3 text-xl">
    <a href="/user/donation">
      <button
        class="active:opacity-75 bg-light hover:bg-light/70 flex w-full items-center gap-2 rounded-md px-3 py-3 text-slate-100 transition-colors duration-300"
      >
        <i class="fa-solid fa-hand-holding-dollar text-2xl"></i>
        <span> Donation</span>
      </button>
    </a>
    <a href="/user/feedback">
      <button
        class="active:opacity-75 bg-light hover:bg-light/70 flex w-full items-center gap-2 rounded-md px-3 py-3 text-slate-100 transition-colors duration-300"
      >
        <i class="ri-feedback-line text-2xl"></i>
        <span> Feedback</span>
      </button>
    </a>
    <button
      onclick="showConfirmBox()"
      id="deletebtn"
      class="active:opacity-75 bg-light hover:bg-light/70 flex w-full items-center gap-2 rounded-md px-3 py-3 text-red-500 transition-colors duration-300"
    >
      <i class="ri-delete-bin-2-line text-2xl"></i>
      <span> Delete Account</span>
    </button>

    <button
      id="logoutbtn"
      onclick="showConfirmBox()"
      class="active:opacity-75 bg-light hover:bg-light/70 flex w-full items-center gap-2 rounded-md px-3 py-3 text-red-500 transition-colors duration-300"
    >
      <svg
        class="h-5 w-5 fill-red-500"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
      >
        <path
          d="M5 22C4.44772 22 4 21.5523 4 21V3C4 2.44772 4.44772 2 5 2H19C19.5523 2 20 2.44772 20 3V6H18V4H6V20H18V18H20V21C20 21.5523 19.5523 22 19 22H5ZM18 16V13H11V11H18V8L23 12L18 16Z"
        ></path>
      </svg>
      <span>Logout</span>
    </button>
  </div>
</div>

<script>
document.title = "Setting"

  
  function showConfirmBox() {
    let confirmBox = document.getElementById("confirmBox");
    confirmBox.style.display = "inline";
  }

  function hideConfirmBox() {
    let confirmBox = document.getElementById("confirmBox");
    confirmBox.style.display = "none";
  }

  function deletefn() {

    let flag = 0;
    document.querySelector("#deletebtn").addEventListener("click", () => {
      flag = 1;
      document.querySelector("#confirm-text").textContent =
        "Are you sure you want to delete your account ?";
    });

    document.querySelector("#logoutbtn").addEventListener("click", () => {
      flag = 0;
      document.querySelector("#confirm-text").textContent =
        "Are you sure you want to logout ?";
    });

    document.querySelector("#yes").addEventListener("click", () => {
      if (flag == 1) {
        window.location.href = "/user/deleteAccount";
      } else {
        window.location.href = "/user/logout";
      }
    });
  };
  
  deletefn();
</script>

<%- include("partials/footer.ejs") %>
